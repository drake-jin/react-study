Enzyme, Jest 를 활용한 React 컴포넌트 및 상태 그리고 리덕스 store 테스팅

# 이상적인 react app 테스트 커버리지

- 프리젠테이셔널 컴포넌트, props 에 따라 제대로 보여지는지 테스트
- 액션 생성함수, 우리가 의도했던 대로 액션을 잘 만들어주는지 테스트
- 리듀서, 상태와 액션을 전달해주면, 의도했던 대로 업데이트를 해주는지 테스트
- 컨테이너 컴포넌트, 통합 테스팅을 통하여 모든게 잘 되는지 테스트

# TDD의 단점

- 테스트를 작성한다는 것은, 개발 프로세스에 결국 한 단계가 더 추가 되는 것이기 때문에 개발 진행도를 아주 조금은 늦출 수는 있습니다. 하지만 나중에 오류 때문에 고생 할 시간을 아껴주긴 합니다.
- 인력과 시간이 충분하다면 모든걸 하는게 맞긴 하겠지만, 그렇지 않을 경우엔 저는 다음과 같은 수준이 현실적 이라고 생각합니다:

1. 프리젠테이셔널 컴포넌트 테스트, 이것은 사실 그렇게 공수가 크지 않습니다. (대부분의 경우)
2. 액션 생성 함수, 저는 이 부분은 거의 테스트를 진행하지 않습니다. 조금 불필요하다고 생각합니다. 특히 FSA 를 따른다면 더더욱 그렇죠. (redux-actions 의 createAction 을 통해 액션을 만들게 되면 형태는 다 같습니다. 다양한 key 가 있는 것이 아니라, payload, error, meta 등의 키로 통일되어있죠.) 그 대신에, 비동기 액션 함수들은 테스팅을 해줍니다.
3. 리듀서, 모든 액션이 다 제대로 작동하는지 확인해줍니다. 리듀서를 테스트하는것은 그렇게 복잡하지 않기 때문에 금방 할 수 있습니다.하는 것은, 시간이 너무 오래 걸릴 수 있으니 주요 로직만 테스팅 해줍니다. 업데이트 로직이 좀 복잡한것들을 말이죠.
4. 시간이 많이 없다면, 그리고 1, 2, 3 번이 제대로 되어있다면, 통합 테스트의 경우 조금 간소하게 해줄 수도 있습니다. 예를 들어서, 컨테이너 컴포넌트의 버튼이 클릭 됐을 때, 스토어에 값이 제대로 바뀌었는지까지는 확인하지 않고, 그저 우리가 예상한 액션이 디스패치 되었는지만 확인해도 됩니다. 어짜피, 상태 관리의 영역은 리덕스 부분이니까요. 컴포넌트의 경우엔 주어진 값만 제대로 렌더링 하게 하면 됩니다. 물론 더욱 더 확실하게 하고 싶다면 상태값까지 모두 잘 바뀌는지 검증하는것도 나쁘지는 않습니다. 하지만 공수가 조금 더 들어갈뿐이죠.
